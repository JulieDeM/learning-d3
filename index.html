<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Learning D3</title>
	<link rel="stylesheet" href="main.css">
	<script  type="text/javascript" src="d3.min.js"></script>
</head>
<body>
<!--Place all DOM elements here -->

<script>
//Write your code here
var w = 800;
var h = 450;
var data = [132, 71, 337,93, 78,43,20,16, 30,8,17,21];
var x = d3.scale.linear()
					.domain([0, d3.max(data)])
					.range([0, w]);
var y = d3.scale.linear()
					.domain([0, data.length])
					.range([0, h]);
var svg = d3.select('body').append('svg')
						.attr('id', 'chart')
						.attr('width', w)
						.attr('height', h);

function plot(params){
// console.log(this);//this here only represents the browser window, need .call when calling function for this to represent
		this.selectAll('.bar')
			.data(params.data)
			.enter()
				.append('rect')
				.classed('bar', true)
				.attr('class', 'bar')
				.attr('x', 0)
				.attr('y', function(d,i){
					return y(i);
				})
				.attr('width', function(d,i){
					return x(d);
				})
				.attr('height', function(d,i){
					return y(1)-3;//-3 is the space between the bars
				})
		this.selectAll(".bar-label")
				.data(params.data)
				.enter()
						.append('text')
						.classed('bar-label', true)
						.attr('x', function(d, i){ //this adds labels to the bar graph
							return x(d); //need to set class in css to text-anchor:end to have data labels in graphs
						})
						.attr('dx', -4)//-4 here nudges the label on graph 4 px from the end
						.attr('y', function(d,i){
							return y(i);
						})
						.attr('dy', function(d,i){ //allows us to nudge y value
							return y(1)/1.5+2 //return y at half way point
						})
						.text(function(d,i){
							return d;
						});
}
plot.call( svg,{ //call allowed us to set this keyword to svg
	data: data
});
</script>
</body>
</html>
